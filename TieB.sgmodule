#!name=ç™¾åº¦è´´å§å»å¹¿å‘Š
#!desc=ç§»é™¤å¼€å±å¹¿å‘Šã€ä¿¡æ¯æµå¹¿å‘Šå’Œå¸–å†…å¹¿å‘Šï¼Œç²¾ç®€ä¾§æ‹‰æŠ½å±‰åŠæˆ‘çš„é¡µé¢ã€‚éœ€æ³¨æ„æ­¤æ’ä»¶ä¼šå¯¼è‡´æ–°å›å¤ç­‰é€šçŸ¥åŠŸèƒ½ä¸å¯ç”¨ï¼Œéœ€æ‰‹åŠ¨è¿›å…¥æ¶ˆæ¯é¡µç‚¹å‡»æŸ¥çœ‹ã€‚ä»…é™iOS 15åŠä»¥ä¸Šç‰ˆæœ¬ç³»ç»Ÿä½¿ç”¨ã€‚
#!author=ZenmoFeiShi[https://github.com/ZenmoFeiShi], å¯è‰ğŸ…¥[https://gitlab.com/lodepuly/vpn_tool/-/blob/master/README.md], app2smile[https://github.com/app2smile]
#!date=2024-09-26 19:49:33
#!arguments=per_filter_video:0
#!arguments-desc=per_filter_video:è®¾ç½®ä¸º1åˆ™æ¨èé¡µä¸å±•ç¤ºè§†é¢‘è´´
# ä»“åº“åœ°å€ https://github.com/app2smile/rules

[Rule]
DOMAIN,afd.baidu.com,REJECT
DOMAIN,mobads.baidu.com,REJECT
DOMAIN,180.76.76.200,REJECT-DROP
IP-CIDR,180.76.76.200/32,REJECT-DROP,no-resolve

[Map Local]
^https:\/\/tiebac\.baidu\.com\/c\/f\/search\/discover data-type=text data="{}" status-code=200
^https:\/\/tiebac\.baidu\.com\/c\/f\/forum\/forumGuide data-type=text data="{}" status-code=200

[Script]
# æ¸…ç†é¦–é¡µ = type=http-response, pattern=^https:\/\/tiebac\.baidu\.com\/livefeed\/feed, script-path=https://gitlab.com/lodepuly/vpn_tool/-/raw/master/Resource/Script/Tieba/Tieba_remove_ads.js, requires-body=true
# æ¸…ç†ä¾§æ‹‰æŠ½å±‰ = type=http-response, pattern=^https:\/\/tiebac\.baidu\.com\/c\/f\/sidebar\/home, script-path=https://gitlab.com/lodepuly/vpn_tool/-/raw/master/Resource/Script/Tieba/Tieba_remove_ads.js, requires-body=true
# æ¸…ç†æˆ‘çš„é¡µé¢ = type=http-response, pattern=^https:\/\/tiebac\.baidu\.com\/c\/u\/user\/profile, script-path=https://gitlab.com/lodepuly/vpn_tool/-/raw/master/Resource/Script/Tieba/Tieba_remove_ads.js, requires-body=true
# æ¸…ç†é¦–é¡µ = type=http-response, pattern=^https:\/\/tieba\.baidu\.com\/c\/f\/frs\/frsBottom, script-path=https://gitlab.com/lodepuly/vpn_tool/-/raw/master/Resource/Script/Tieba/Tieba_remove_ads.js, requires-body=true
JSONå¤„ç† = type=http-response, pattern=^http(s:\/\/tiebac|:\/\/c\.tieba)\.baidu\.com\/(c\/f\/(frs\/(page|threadlist|generalTabList)|pb\/page|excellent\/personalized)$|tiebaads\/commonbatch|c\/s\/sync$), script-path=https://raw.githubusercontent.com/app2smile/rules/master/js/tieba-json.js, requires-body=true, timeout=10
Protoå¤„ç† = type=http-response, pattern=^http(s:\/\/tiebac|:\/\/c\.tieba)\.baidu\.com\/c\/f\/(frs\/(page|threadlist|generalTabList)|pb\/page|excellent\/personalized)\?cmd, script-path=https://raw.githubusercontent.com/app2smile/rules/master/js/tieba-proto.js, requires-body=true, binary-body-mode=true, timeout=10
# è´´å§JSON = type=http-response, pattern=^http(s:\/\/tiebac|:\/\/c\.tieba)\.baidu\.com\/(c\/(s\/sync|f\/(frs\/(page|threadlist|generalTabList)|pb\/(pic)?page|excellent\/personalized))$|tiebaads\/commonbatch\?),requires-body=1,max-size=0,script-path=https://raw.githubusercontent.com/app2smile/rules/master/js/tieba-json.js,script-update-interval=0
# è´´å§Proto = type=http-response, pattern=^http(s:\/\/tiebac|:\/\/c\.tieba)\.baidu\.com\/c\/f\/(frs\/(page|threadlist|generalTabList)|pb\/page|excellent\/personalized)\?cmd,requires-body=1,binary-body-mode=1,max-size=-1,script-path=https://raw.githubusercontent.com/app2smile/rules/master/js/tieba-proto.js,argument=per_filter_video_thread={{{per_filter_video}}}

[MITM]
hostname = %APPEND% tiebac.baidu.com
